<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Банк Приколов</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #222;
      color: #eee;
      margin: 0; padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }
    h1 { margin-bottom: 20px; }
    input, button {
      padding: 10px;
      margin: 5px 0;
      border-radius: 6px;
      border: none;
      font-size: 16px;
    }
    button {
      background: #4caf50;
      color: white;
      cursor: pointer;
    }
    button:hover { background: #45a049; }
    .hidden { display: none; }
    .container {
      max-width: 400px;
      width: 100%;
      background: #333;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 15px #000;
    }
    label { display: block; margin-top: 10px; }
    .admin-section {
      margin-top: 30px;
      background: #444;
      padding: 15px;
      border-radius: 8px;
    }
    .error {
      color: #ff6666;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>Банк Приколов</h1>
  <div class="container" id="reg-login">
    <h2>Регистрация</h2>
    <label>Имя клиента:
      <input type="text" id="reg-name" placeholder="Введите имя" />
    </label>
    <button id="btn-register">Зарегистрироваться</button>

    <h2>Вход</h2>
    <label>ID клиента:
      <input type="text" id="login-id" placeholder="Введите ID" />
    </label>
    <button id="btn-login">Войти</button>

    <div id="reg-login-error" class="error"></div>
  </div>

  <div class="container hidden" id="client-panel">
    <h2>Добро пожаловать, <span id="client-name"></span>!</h2>
    <p>Ваш баланс: <b><span id="client-balance">0</span> ₽</b></p>
    <button id="btn-logout">Выйти</button>
  </div>

  <div class="container hidden" id="admin-login-section">
    <h2>Админка</h2>
    <label>Введите пароль:
      <input type="password" id="admin-password" placeholder="Пароль" />
    </label>
    <button id="btn-admin-login">Войти в админку</button>
    <div id="admin-error" class="error"></div>
  </div>

  <div class="container hidden" id="admin-panel">
    <h2>Панель администратора</h2>
    <label>ID клиента:
      <input type="text" id="admin-client-id" placeholder="Введите ID клиента" />
    </label>
    <label>Новый баланс:
      <input type="number" id="admin-new-balance" placeholder="Новый баланс" />
    </label>
    <button id="btn-update-balance">Обновить баланс</button>
    <button id="btn-admin-logout" style="background:#a33; margin-top:10px;">Выйти из админки</button>
    <div id="admin-success" style="color:#6f6; margin-top:10px;"></div>
  </div>

<script>
  // Работа с localStorage для клиентов
  function loadClients() {
    const raw = localStorage.getItem('clients');
    return raw ? JSON.parse(raw) : {};
  }
  function saveClients(clients) {
    localStorage.setItem('clients', JSON.stringify(clients));
  }

  // Генерация уникального ID
  function generateId() {
    return 'id-' + Math.random().toString(36).substr(2, 9);
  }

  // Переменные DOM
  const regLoginDiv = document.getElementById('reg-login');
  const clientPanel = document.getElementById('client-panel');
  const adminLoginSection = document.getElementById('admin-login-section');
  const adminPanel = document.getElementById('admin-panel');

  const regNameInput = document.getElementById('reg-name');
  const loginIdInput = document.getElementById('login-id');
  const clientNameSpan = document.getElementById('client-name');
  const clientBalanceSpan = document.getElementById('client-balance');

  const regLoginError = document.getElementById('reg-login-error');
  const adminError = document.getElementById('admin-error');
  const adminSuccess = document.getElementById('admin-success');

  // Кнопки
  const btnRegister = document.getElementById('btn-register');
  const btnLogin = document.getElementById('btn-login');
  const btnLogout = document.getElementById('btn-logout');

  const btnAdminLogin = document.getElementById('btn-admin-login');
  const btnAdminLogout = document.getElementById('btn-admin-logout');
  const btnUpdateBalance = document.getElementById('btn-update-balance');

  const adminClientIdInput = document.getElementById('admin-client-id');
  const adminNewBalanceInput = document.getElementById('admin-new-balance');

  // Состояния
  let currentClientId = null;
  let clients = loadClients();

  // Регистрация клиента
  btnRegister.onclick = () => {
    regLoginError.textContent = '';
    const name = regNameInput.value.trim();
    if (!name) {
      regLoginError.textContent = 'Введите имя клиента.';
      return;
    }

    const id = generateId();
    clients[id] = { name, balance: 0 };
    saveClients(clients);

    alert(`Клиент зарегистрирован!\nID: ${id}`);
    regNameInput.value = '';
  };

  // Вход клиента
  btnLogin.onclick = () => {
    regLoginError.textContent = '';
    const id = loginIdInput.value.trim();
    if (!id || !clients[id]) {
      regLoginError.textContent = 'Неверный ID клиента.';
      return;
    }
    currentClientId = id;
    showClientPanel();
  };

  // Показ панели клиента
  function showClientPanel() {
    regLoginDiv.classList.add('hidden');
    adminLoginSection.classList.remove('hidden');
    clientPanel.classList.remove('hidden');
    adminPanel.classList.add('hidden');
    updateClientInfo();
  }

  // Обновить инфо клиента на экране
  function updateClientInfo() {
    if (!currentClientId || !clients[currentClientId]) return;
    clientNameSpan.textContent = clients[currentClientId].name;
    clientBalanceSpan.textContent = clients[currentClientId].balance;
  }

  // Выход клиента
  btnLogout.onclick = () => {
    currentClientId = null;
    regLoginDiv.classList.remove('hidden');
    clientPanel.classList.add('hidden');
    adminLoginSection.classList.add('hidden');
    adminPanel.classList.add('hidden');
    regLoginError.textContent = '';
    adminError.textContent = '';
    adminSuccess.textContent = '';
    loginIdInput.value = '';
  };

  // Вход в админку
  btnAdminLogin.onclick = () => {
    adminError.textContent = '';
    const pass = document.getElementById('admin-password').value.trim();
    if (pass === '1234') {
      adminLoginSection.classList.add('hidden');
      adminPanel.classList.remove('hidden');
      document.getElementById('admin-password').value = '';
      adminSuccess.textContent = '';
    } else {
      adminError.textContent = 'Неверный пароль.';
    }
  };

  // Выход из админки
  btnAdminLogout.onclick = () => {
    adminPanel.classList.add('hidden');
    adminLoginSection.classList.remove('hidden');
    adminClientIdInput.value = '';
    adminNewBalanceInput.value = '';
    adminSuccess.textContent = '';
    adminError.textContent = '';
  };

  // Обновление баланса клиента
  btnUpdateBalance.onclick = () => {
    adminError.textContent = '';
    adminSuccess.textContent = '';

    const id = adminClientIdInput.value.trim();
    const newBalance = Number(adminNewBalanceInput.value.trim());

    if (!id || !clients[id]) {
      adminError.textContent = 'Клиент с таким ID
